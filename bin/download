#!/usr/bin/env python

import fetchsep.utils.download
import argparse




parser = argparse.ArgumentParser()
parser.add_argument("--StartDate", type=str, default='',
        help=("Start date in YYYY-MM-DD or \"YYYY-MM-DD HH:MM:SS\""
               " with quotes"))

parser.add_argument("--EndDate", type=str, default='',
        help=("End date in YYYY-MM-DD or \"YYYY-MM-DD HH:MM:SS\""
                " with quotes"))

parser.add_argument("--Experiment", type=str,
        choices=['GOES','GOES-05', 'GOES-06', 'GOES-07', 'GOES-08',
        'GOES-10', 'GOES-11', 'GOES-12', 'GOES-13', 'GOES-14', 'GOES-15',
        'GOES-16','GOES-17','GOES-18', 'GOES_RT', 'SEPEM', 'SEPEMv3', 'EPHIN',
        'EPHIN_REleASE', 'ERNE', 'STEREO-A', 'STEREO-B', 'CalGOES',
        'ACE_SIS', 'ACE_EPAM_electrons', 'IMP8_CPME', 'user'],
        default='', help="Enter name of spacecraft or dataset")

parser.add_argument("--FluxType", type=str, choices=['integral',
        'differential'], default='',
        help=("Do you want to use integral or differential fluxes?"))

parser.add_argument("--Spacecraft", type=str, choices=['primary',
        'secondary'], default='',
        help=("If GOES_RT is selected, choose the primary or secondary spacecraft."))

parser.add_argument("--options", type=str, default='', help=("You "
        "may specify a series of options as a semi-colon separated list "
        "surrounded by quotations.\n"
        "\"uncorrected\" for GOES uncorrected differential fluxes with "
        "nominal GOES energy bins,\n "
        "\"S14\" to apply Sandberg et al. (2014) "
        "effective energies to GOES uncorrected fluxes for P2-P6,\n "
        "\"Bruno2017\" to apply Bruno (2017) effective energies to GOES-13 "
        "or GOES-15 P6-P11 channels for either corrected or uncorrected "
        "GOES fluxes. \n"
        "If both S14 and Bruno2017 are "
        "specified for GOES-13 or GOES-15, S14 bins will be applied to "
        "P2-P5 and Bruno2017 bins will be applied to P6-P11 for uncorrected "
        "fluxes.\n"
        "e.g. \"uncorrected;S14;Bruno2017\""))

parser.add_argument("--DoInterp",
        help=("Fill in negative, bad, or missing fluxes via "
                "linear interpolation in time."), action="store_true")

parser.add_argument("--showplot",
        help="Flag to display plots", action="store_true")

parser.add_argument("--saveplot",
        help="Flag to save plots to file", action="store_true")

parser.add_argument("--datapath", type=str, default='',
        help=("Specify path where data should be downloaded. Will default to "
            "datapath listed in fetchsep.cfg if a value is not specified."))

parser.add_argument("--ExportConfig", action="store_true",
        help=("Export the default configuration file to fetchsep.cfg in "
              "the current working directory and exit.  Used to prepare a "
              "starting point for creating a new user configuration."))

args = parser.parse_args()

if args.ExportConfig:
    import fetchsep.utils.config as config
    config.export_config()
    exit(0)         

str_startdate = args.StartDate
str_enddate = args.EndDate
experiment = args.Experiment
flux_type = args.FluxType
spacecraft = args.Spacecraft

options = args.options
dointerp = args.DoInterp

showplot = args.showplot
saveplot = args.saveplot
path_to_data = args.datapath
    
fetchsep.utils.download.get_data(str_startdate, str_enddate, experiment,
    flux_type, options, dointerp, showplot, saveplot, spacecraft=spacecraft,
    path_to_data=path_to_data)

